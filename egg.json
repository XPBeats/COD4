{
  "meta": { "version": "PTDL_v2", "update_url": "https://github.com/XPBeats/COD4" },
  "name": "Call of Duty 4 (Wine)",
  "author": "XPBeats",
  "description": "COD4 dedicated server with COD4x18 support",
  "features": null,
  "docker_images": {
    "quay.io/parkervcp/pterodactyl-images:debian_wine": "quay.io/parkervcp/pterodactyl-images:debian_wine"
  },
  "file_denylist": ["denied-file.txt"],
  "startup": "./cod4x18_dedrun +set fs_basepath \"/home/container\" +set fs_homepath \"/home/container\" +set dedicated 2 +set net_ip 0.0.0.0 +set net_port {{SERVER_PORT}} +exec server.cfg +map_rotate",
  "config": { "files": {}, "startup": {}, "logs": {}, "stop": "^C" },
  "scripts": {
    "installation": {
      "script": "#!/bin/bash\nset -e\n\n# Default APPID if not set\nif [ -z \"$APPID\" ]; then APPID=22200; fi\n\ncd /home/container\n./steamcmd.sh +login anonymous +force_install_dir /home/container +app_update $APPID validate +quit || true\n\nif [ ! -f main/iw_00.iwd ]; then\n  echo \"ERROR: COD4 files failed to download!\"\n  exit 1\nfi\n\necho \"COD4 successfully installed (AppID $APPID)\"\n",
      "container": "debian:bullseye-slim",
      "entrypoint": "bash"
    }
  },
  "variables": [
    {
      "name": "Server Port",
      "env_variable": "SRCDS_PORT",
      "default_value": "28960",
      "user_viewable": true,
      "user_editable": true,
      "rules": "required|integer",
      "description": "Port the server will listen on"
    },
    {
      "name": "Steam AppID",
      "env_variable": "APPID",
      "default_value": "22200",
      "user_viewable": true,
      "user_editable": true,
      "rules": "required|integer",
      "description": "22200 = COD4 dedicated server"
    }
  ]
}
